/*
 Fraction.js v1.3.1 03/07/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(n){function q(b,a){if(0===a%2)return q(b,a/2);if(0===a%5)return q(b,a/5);for(var c=1;c<=a;c++)if(1===r(c,a))return c;return 0}function r(b,a){for(var c=10,d=1;0<b;c=c*c%a,b>>=1)b&1&&(d=d*c%a);return d}function k(b,m){if(!m)throw"DIV/0";a.s=(0<=b)-(0>b);b=Math.abs(b);m=Math.abs(m);for(var c=b,d=m,h;d;)h=d,d=c%d,c=h;a.n=b/c;a.d=m/c;return a}function l(b){var a=0,c=1,d=1;if(1===b.length)b=b[0];else if(2!==b.length)throw"Parameter mismatch";switch(typeof b){case "object":if(null!==b)if(void 0!==
b[0]&&void 0!==b[1])a=b[0],c=b[1],d=a*c;else if("d"in b&&"n"in b)a=b.n,c=b.d,d=a*c,void 0!==b.s&&(d*=b.s);else throw"Unknown format";break;case "number":0>b&&(b=-b,d=-1);if(0<b){var h=0,f=1,e=1,g=1,l=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10));for(b/=l;1E7>=f&&1E7>=g;)if(a=(h+e)/(f+g),b===a){1E7>=f+g?(a=h+e,c=f+g):g>f?(a=e,c=g):(a=h,c=f);break}else b>a?(h+=e,f+=g):(e+=h,g+=f),1E7<f?(a=e,c=g):(a=h,c=f);a*=l}break;case "string":a=b.split("");b=[0,0,0,0,0];h=[0,0,0,0,0];for(g=e=0;g<a.length;g++)if("."===
a[g])if(0===e)e++;else throw"Corrupted number";else if("("===a[g]||"'"===a[g]||")"===a[g])if(0<e&&3>e)e++;else throw"Corrupted number";else if(0===g&&"-"===a[0])d=-1;else if(3>e){f=parseInt(a[g],10);if(isNaN(f))throw"Corrupted number";b[e]=10*b[e]+f;h[e]++}else throw"Corrupted number";if(2===e)throw"Corrupted number";b[3]=Math.pow(10,h[1]);b[4]=0<b[2]?Math.pow(10,h[2])-1:1;a=b[2]+b[4]*(b[0]*b[3]+b[1]);c=b[3]*b[4];break;default:throw"Unknown type";}c||k(0,0);p.n=Math.abs(a);p.d=Math.abs(c);p.s=(0<=
d)-(0>d);return p}var p={n:0,d:0,s:0},a=this;a.abs=function(){a.s=1;return a};a.add=function(b){b=l(arguments);return k(a.s*a.n*b.d+b.s*a.d*b.n,a.d*b.d)};a.sub=function(b){b=l(arguments);return k(a.s*a.n*b.d-b.s*a.d*b.n,a.d*b.d)};a.mul=function(b){b=l(arguments);return k(a.s*b.s*a.n*b.n,a.d*b.d)};a.div=function(b){b=l(arguments);return k(a.s*b.s*a.n*b.d,a.d*b.n)};a.set=function(a){a=l(arguments);return k(a.s*a.n,a.d)};a.mod=function(b){b=l(arguments);return 0===b.n*a.d?k(0,0):k(a.s*b.d*a.n%(b.n*a.d),
b.d*a.d)};a.reciprocal=function(){return k(a.s*a.d,a.n)};a.equals=function(b){b=l(arguments);return b.s*b.n*a.d===a.s*a.n*b.d};a.divisible=function(b){b=l(arguments);return 0===b.n*a.d?!1:0===a.n*b.d%(b.n*a.d)};a.toNumber=function(){return a.s*a.n/a.d};a.toFraction=function(){return a.n>a.d?0===a.n%a.d?""+a.s*a.n/a.d:(a.s*a.n/a.d|0)+" "+a.n%a.d+"/"+a.d:a.s*a.n+" / "+a.d};a.toString=function(){var b=(""+a.n).split(""),l=a.d,c=0,d="",h=q(a.n,a.d),f;a:{f=a.d;for(var e=0;e<f;e++)if(r(e,f)===r(e+h,f)){f=
e;break a}f=0}for(var e=-1,g=10+h+f+b.length,k=0;k<g;k++){c*=10;k<b.length?c+=parseInt(b[k],10):k===b.length?(d+=".",e=0):e++;if(0<h&&e===f)d+="(";else if(0<h&&e-f===h){d+=")";break}c>=l?(d+=c/l|0,c%=l):d+="0"}return(~a.s?"":"-")+d.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};n=l(arguments);k(n.s*n.n,n.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);
