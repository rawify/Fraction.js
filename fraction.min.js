/*
 Fraction.js v1.0.0 12/03/2014
 http://www.xarg.org/2014/03/precise-calculations-in-javascript/

 Copyright (c) 2014, Robert Eisele (robert@xarg.org)
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function Fraction(l){function n(a,c){if(0===c%2)return n(a,c/2);if(0===c%5)return n(a,c/5);for(var b=1;b<=c;b++)if(1===p(b,c))return b;return 0}function p(a,c){for(var b=10,d=1;0<a;b=b*b%c,a>>=1)a&1&&(d=d*b%c);return d}function h(a,c){if(!c)throw"DIV/0";this.s=(0<=a)-(0>a);a=Math.abs(a);c=Math.abs(c);for(var b=a,d=c,k;d;)k=d,d=b%d,b=k;this.n=a/b;this.d=c/b;return this}function g(a){var c=0,b=1,d=1;if(1===a.length)a=a[0];else if(2!==a.length)throw"Parameter mismatch";switch(typeof a){case "object":if(null===
a)break;else if(void 0!==a[0]&&void 0!==a[1]){c=a[0];b=a[1];d=c*b;break}else if("d"in a&&"n"in a){c=a.n;b=a.d;d=c*b;void 0!==a.s&&(d*=a.s);break}else if("z"in a&&"n"in a){c=a.z;b=a.n;d=c*b;break}else throw"Unknown format";case "string":a=a.replace(/^[\s]+/g,"").replace(/[\s]+$/,"").replace(",","");case "number":c=(""+a).split("");a=[0,0,0,0,0];for(var b=[0,0,0,0,0],k,e=0,f=0;f<c.length;f++)if("."===c[f])if(0===e)e++;else throw"Corrupted number";else if("("===c[f]||"'"===c[f]||")"===c[f])if(0<e&&3>
e)e++;else throw"Corrupted number";else if(0===f&&"-"===c[0])d=-1;else if(3>e){k=parseInt(c[f],10);if(isNaN(k))throw"Corrupted number";a[e]=10*a[e]+k;b[e]++}else throw"Corrupted number";if(2===e)throw"Corrupted number";a[3]=Math.pow(10,b[1]);a[4]=0<a[2]?Math.pow(10,b[2])-1:1;c=a[2]+a[4]*(a[0]*a[3]+a[1]);b=a[3]*a[4];break;default:throw"Unknown type";}b||h(0,0);m.n=Math.abs(c);m.d=Math.abs(b);m.s=(0<=d)-(0>d);return m}this.abs=function(){this.s=1;return this};this.add=function(a){a=g(arguments);return h.call(this,
this.s*this.n*a.d+a.s*this.d*a.n,this.d*a.d)};this.sub=function(a){a=g(arguments);return h.call(this,this.s*this.n*a.d-a.s*this.d*a.n,this.d*a.d)};this.mul=function(a){a=g(arguments);return h.call(this,this.s*a.s*this.n*a.n,this.d*a.d)};this.div=function(a){a=g(arguments);return h.call(this,this.s*a.s*this.n*a.d,this.d*a.n)};this.set=function(a){a=g(arguments);return h.call(this,a.s*a.n,a.d)};this.mod=function(a){a=g(arguments);return 0===a.n*this.d?h.call(this,0,0):h.call(this,this.s*a.d*this.n%
(a.n*this.d),a.d*this.d)};this.reciprocal=function(){return h.call(this,this.s*this.d,this.n)};this.equals=function(a){a=g(arguments);return a.s*a.n*this.d===this.s*this.n*a.d};this.divisible=function(a){a=g(arguments);return 0===this.n*a.d%(a.n*this.d)};this.toString=function(){var a=(""+this.n).split(""),c=this.d,b=0,d="",k=n(this.n,this.d),e;a:{e=this.d;for(var f=0;f<e;f++)if(p(f,e)===p(f+k,e)){e=f;break a}e=0}for(var f=-1,h=10+k+e+a.length,g=0;g<h;g++){b*=10;g<a.length?b+=parseInt(a[g],10):g===
a.length?(d+=".",f=0):f++;if(0<k&&f===e)d+="(";else if(0<k&&f-e===k){d+=")";break}b>=c?(d+=b/c|0,b%=c):d+="0"}return(~this.s?"":"-")+d.replace(/^0+([1-9]|0\.)/g,"$1").replace(/(\d)0+$/,"$1")};this.n=this.s=0;this.d=1;var m={n:0,d:0,s:0};l=g(arguments);h.call(this,l.s*l.n,l.d)}"undefined"!==typeof module&&module.exports&&(module.exports.Fraction=Fraction);
