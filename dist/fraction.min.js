/*
Fraction.js v5.0.6 10/10/2024
https://raw.org/article/rational-numbers-in-javascript/

Copyright (c) 2024, Robert Eisele (https://raw.org/)
Licensed under the MIT license.
*/
'use strict';(function(C){function A(){return Error("Parameters must be integer")}function v(){return Error("Invalid argument")}function y(){return Error("Division by Zero")}function q(a,c){var d=g,b=h;let f=h;if(void 0!==a&&null!==a)if(void 0!==c){if("bigint"===typeof a)d=a;else{if(isNaN(a))throw v();if(0!==a%1)throw A();d=BigInt(a)}if("bigint"===typeof c)b=c;else{if(isNaN(c))throw v();if(0!==c%1)throw A();b=BigInt(c)}f=d*b}else if("object"===typeof a){if("d"in a&&"n"in a)d=BigInt(a.n),b=BigInt(a.d),
"s"in a&&(d*=BigInt(a.s));else if(0 in a)d=BigInt(a[0]),1 in a&&(b=BigInt(a[1]));else if("bigint"===typeof a)d=a;else throw v();f=d*b}else if("number"===typeof a){if(isNaN(a))throw v();0>a&&(f=-h,a=-a);if(0===a%1)d=BigInt(a);else if(0<a){c=1;var m=0,k=1,n=1;let t=1;1<=a&&(c=10**Math.floor(1+Math.log10(a)),a/=c);for(;1E7>=k&&1E7>=t;)if(b=(m+n)/(k+t),a===b){1E7>=k+t?(d=m+n,b=k+t):t>k?(d=n,b=t):(d=m,b=k);break}else a>b?(m+=n,k+=t):(n+=m,t+=k),1E7<k?(d=n,b=t):(d=m,b=k);d=BigInt(d)*BigInt(c);b=BigInt(b)}}else if("string"===
typeof a){b=0;m=c=d=g;k=n=h;a=a.replace(/_/g,"").match(/\d+|./g);if(null===a)throw v();"-"===a[b]?(f=-h,b++):"+"===a[b]&&b++;if(a.length===b+1)c=u(a[b++],f);else if("."===a[b+1]||"."===a[b]){"."!==a[b]&&(d=u(a[b++],f));b++;if(b+1===a.length||"("===a[b+1]&&")"===a[b+3]||"'"===a[b+1]&&"'"===a[b+3])c=u(a[b],f),n=p**BigInt(a[b].length),b++;if("("===a[b]&&")"===a[b+2]||"'"===a[b]&&"'"===a[b+2])m=u(a[b+1],f),k=p**BigInt(a[b+1].length)-h,b+=3}else"/"===a[b+1]||":"===a[b+1]?(c=u(a[b],f),n=u(a[b+2],h),b+=
3):"/"===a[b+3]&&" "===a[b+1]&&(d=u(a[b],f),c=u(a[b+2],f),n=u(a[b+4],h),b+=5);if(a.length<=b)b=n*k,f=d=m+b*d+k*c;else throw v();}else if("bigint"===typeof a)f=d=a,b=h;else throw v();if(b===g)throw y();e.s=f<g?-h:h;e.n=d<g?-d:d;e.d=b<g?-b:b}function u(a,c){try{a=BigInt(a)}catch(d){throw v();}return a*c}function l(a,c){if(c===g)throw y();const d=Object.create(r.prototype);d.s=a<g?-h:h;a=a<g?-a:a;const b=w(a,c);d.n=a/b;d.d=c/b;return d}function B(a){const c={};let d=a,b=x,f=z-h;for(;f<=d;){for(;d%b===
g;)d/=b,c[b]=(c[b]||g)+h;f+=h+x*b++}d!==a?1<d&&(c[d]=(c[d]||g)+h):c[a]=(c[a]||g)+h;return c}function D(a,c){for(;c%x===g;c/=x);for(;c%z===g;c/=z);if(c===h)return g;a=p%c;let d=1;for(;a!==h;d++)if(a=a*p%c,2E3<d)return g;return BigInt(d)}function E(a,c,d){a=h;var b=p;let f=h;for(;d>g;b=b*b%c,d>>=h)d&h&&(f=f*b%c);b=f;for(d=0;300>d;d++){if(a===b)return BigInt(d);a=a*p%c;b=b*p%c}return 0}function w(a,c){if(!a)return c;if(!c)return a;for(;;){a%=c;if(!a)return c;c%=a;if(!c)return a}}function r(a,c){q(a,
c);if(this instanceof r)a=w(e.d,e.n),this.s=e.s,this.n=e.n/a,this.d=e.d/a;else return l(e.s*e.n,e.d)}"undefined"===typeof BigInt&&(BigInt=function(a){if(isNaN(a))throw Error("");return a});const g=BigInt(0),h=BigInt(1),x=BigInt(2),z=BigInt(5),p=BigInt(10),e={s:h,n:g,d:h};r.prototype={s:h,n:g,d:h,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(a,c){q(a,c);return l(this.s*this.n*e.d+e.s*this.d*e.n,this.d*e.d)},sub:function(a,c){q(a,c);return l(this.s*
this.n*e.d-e.s*this.d*e.n,this.d*e.d)},mul:function(a,c){q(a,c);return l(this.s*e.s*this.n*e.n,this.d*e.d)},div:function(a,c){q(a,c);return l(this.s*e.s*this.n*e.d,this.d*e.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(a,c){if(void 0===a)return l(this.s*this.n%this.d,h);q(a,c);if(g===e.n*this.d)throw y();return l(this.s*e.d*this.n%(e.n*this.d),e.d*this.d)},gcd:function(a,c){q(a,c);return l(w(e.n,this.n)*w(e.d,this.d),e.d*this.d)},lcm:function(a,c){q(a,c);return e.n===g&&this.n===
g?l(g,h):l(e.n*this.n,w(e.n,this.n)*w(e.d,this.d))},inverse:function(){return l(this.s*this.d,this.n)},pow:function(a,c){q(a,c);if(e.d===h)return e.s<g?l((this.s*this.d)**e.n,this.n**e.n):l((this.s*this.n)**e.n,this.d**e.n);if(this.s<g)return null;a=B(this.n);c=B(this.d);let d=h,b=h;for(let f in a)if("1"!==f){if("0"===f){d=g;break}a[f]*=e.n;if(a[f]%e.d===g)a[f]/=e.d;else return null;d*=BigInt(f)**a[f]}for(let f in c)if("1"!==f){c[f]*=e.n;if(c[f]%e.d===g)c[f]/=e.d;else return null;b*=BigInt(f)**c[f]}return e.s<
g?l(b,d):l(d,b)},equals:function(a,c){q(a,c);return this.s*this.n*e.d===e.s*e.n*this.d},compare:function(a,c){q(a,c);a=this.s*this.n*e.d-e.s*e.n*this.d;return(g<a)-(a<g)},ceil:function(a){a=p**BigInt(a||0);return l(this.s*a*this.n/this.d+(a*this.n%this.d>g&&this.s>=g?h:g),a)},floor:function(a){a=p**BigInt(a||0);return l(this.s*a*this.n/this.d-(a*this.n%this.d>g&&this.s<g?h:g),a)},round:function(a){a=p**BigInt(a||0);return l(this.s*a*this.n/this.d+this.s*((this.s>=g?h:g)+a*this.n%this.d*x>this.d?h:
g),a)},roundTo:function(a,c){q(a,c);var d=this.n*e.d;a=this.d*e.n;c=d%a;d/=a;c+c>=a&&d++;return l(this.s*d*e.n,e.d)},divisible:function(a,c){q(a,c);return!(!(e.n*this.d)||this.n*e.d%(e.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(a){function c(n){return"bigint"===typeof n?n:Math.floor(n)}let d=this.n,b=this.d;a=a||15;var f=D(d,b);let m=E(d,b,f),k=this.s<g?"-":"";k+=c(d/b);(d=d%b*p)&&(k+=".");if(f){for(a=m;a--;)k+=c(d/b),d%=b,d*=p;for(k+="(";f--;)k+=
c(d/b),d%=b,d*=p;k+=")"}else for(f=a;d&&f--;)k+=c(d/b),d%=b,d*=p;return k},toFraction:function(a){let c=this.n,d=this.d,b=this.s<g?"-":"";if(d===h)b+=c;else{let f=c/d;a&&f>g&&(b+=f,b+=" ",c%=d);b=b+c+"/"+d}return b},toLatex:function(a){let c=this.n,d=this.d,b=this.s<g?"-":"";if(d===h)b+=c;else{let f=c/d;a&&f>g&&(b+=f,c%=d);b=b+"\\frac{"+c+"}{"+d;b+="}"}return b},toContinued:function(){let a=this.n,c=this.d,d=[];do{d.push(a/c);let b=a%c;a=c;c=b}while(a!==h);return d},simplify:function(a){a=a||.001;
const c=this.abs(),d=c.toContinued();for(let b=1;b<d.length;b++){let f=l(d[b-1],h);for(let m=b-2;0<=m;m--)f=f.inverse().add(d[m]);if(Math.abs(f.sub(c).valueOf())<a)return f.mul(this.s)}return this}};"function"===typeof define&&define.amd?define([],function(){return r}):"object"===typeof exports?(Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=r,r.Fraction=r,module.exports=r):C.Fraction=r})(this);
