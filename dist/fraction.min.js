/*
Fraction.js v5.1.1 11/1/2024
https://raw.org/article/rational-numbers-in-javascript/

Copyright (c) 2024, Robert Eisele (https://raw.org/)
Licensed under the MIT license.
*/
'use strict';(function(D){function B(){return Error("Parameters must be integer")}function w(){return Error("Invalid argument")}function z(){return Error("Division by Zero")}function n(a,b){var d=g,c=h;let f=h;if(void 0!==a&&null!==a)if(void 0!==b){if("bigint"===typeof a)d=a;else{if(isNaN(a))throw w();if(0!==a%1)throw B();d=BigInt(a)}if("bigint"===typeof b)c=b;else{if(isNaN(b))throw w();if(0!==b%1)throw B();c=BigInt(b)}f=d*c}else if("object"===typeof a){if("d"in a&&"n"in a)d=BigInt(a.n),c=BigInt(a.d),
"s"in a&&(d*=BigInt(a.s));else if(0 in a)d=BigInt(a[0]),1 in a&&(c=BigInt(a[1]));else if("bigint"===typeof a)d=a;else throw w();f=d*c}else if("number"===typeof a){if(isNaN(a))throw w();0>a&&(f=-h,a=-a);if(0===a%1)d=BigInt(a);else if(0<a){b=1;var k=0,m=1,p=1;let u=1;1<=a&&(b=10**Math.floor(1+Math.log10(a)),a/=b);for(;1E7>=m&&1E7>=u;)if(c=(k+p)/(m+u),a===c){1E7>=m+u?(d=k+p,c=m+u):u>m?(d=p,c=u):(d=k,c=m);break}else a>c?(k+=p,m+=u):(p+=k,u+=m),1E7<m?(d=p,c=u):(d=k,c=m);d=BigInt(d)*BigInt(b);c=BigInt(c)}}else if("string"===
typeof a){c=0;k=b=d=g;m=p=h;a=a.replace(/_/g,"").match(/\d+|./g);if(null===a)throw w();"-"===a[c]?(f=-h,c++):"+"===a[c]&&c++;if(a.length===c+1)b=v(a[c++],f);else if("."===a[c+1]||"."===a[c]){"."!==a[c]&&(d=v(a[c++],f));c++;if(c+1===a.length||"("===a[c+1]&&")"===a[c+3]||"'"===a[c+1]&&"'"===a[c+3])b=v(a[c],f),p=q**BigInt(a[c].length),c++;if("("===a[c]&&")"===a[c+2]||"'"===a[c]&&"'"===a[c+2])k=v(a[c+1],f),m=q**BigInt(a[c+1].length)-h,c+=3}else"/"===a[c+1]||":"===a[c+1]?(b=v(a[c],f),p=v(a[c+2],h),c+=
3):"/"===a[c+3]&&" "===a[c+1]&&(d=v(a[c],f),b=v(a[c+2],f),p=v(a[c+4],h),c+=5);if(a.length<=c)c=p*m,f=d=k+c*d+m*b;else throw w();}else if("bigint"===typeof a)f=d=a,c=h;else throw w();if(c===g)throw z();e.s=f<g?-h:h;e.n=d<g?-d:d;e.d=c<g?-c:c}function v(a,b){try{a=BigInt(a)}catch(d){throw w();}return a*b}function r(a){return"bigint"===typeof a?a:Math.floor(a)}function l(a,b){if(b===g)throw z();const d=Object.create(t.prototype);d.s=a<g?-h:h;a=a<g?-a:a;const c=x(a,b);d.n=a/c;d.d=b/c;return d}function C(a){const b=
{};let d=a,c=y,f=A-h;for(;f<=d;){for(;d%c===g;)d/=c,b[c]=(b[c]||g)+h;f+=h+y*c++}d!==a?1<d&&(b[d]=(b[d]||g)+h):b[a]=(b[a]||g)+h;return b}function x(a,b){if(!a)return b;if(!b)return a;for(;;){a%=b;if(!a)return b;b%=a;if(!b)return a}}function t(a,b){n(a,b);if(this instanceof t)a=x(e.d,e.n),this.s=e.s,this.n=e.n/a,this.d=e.d/a;else return l(e.s*e.n,e.d)}"undefined"===typeof BigInt&&(BigInt=function(a){if(isNaN(a))throw Error("");return a});const g=BigInt(0),h=BigInt(1),y=BigInt(2),A=BigInt(5),q=BigInt(10),
e={s:h,n:g,d:h};t.prototype={s:h,n:g,d:h,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(a,b){n(a,b);return l(this.s*this.n*e.d+e.s*this.d*e.n,this.d*e.d)},sub:function(a,b){n(a,b);return l(this.s*this.n*e.d-e.s*this.d*e.n,this.d*e.d)},mul:function(a,b){n(a,b);return l(this.s*e.s*this.n*e.n,this.d*e.d)},div:function(a,b){n(a,b);return l(this.s*e.s*this.n*e.d,this.d*e.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(a,b){if(void 0===
a)return l(this.s*this.n%this.d,h);n(a,b);if(g===e.n*this.d)throw z();return l(this.s*e.d*this.n%(e.n*this.d),e.d*this.d)},gcd:function(a,b){n(a,b);return l(x(e.n,this.n)*x(e.d,this.d),e.d*this.d)},lcm:function(a,b){n(a,b);return e.n===g&&this.n===g?l(g,h):l(e.n*this.n,x(e.n,this.n)*x(e.d,this.d))},inverse:function(){return l(this.s*this.d,this.n)},pow:function(a,b){n(a,b);if(e.d===h)return e.s<g?l((this.s*this.d)**e.n,this.n**e.n):l((this.s*this.n)**e.n,this.d**e.n);if(this.s<g)return null;a=C(this.n);
b=C(this.d);let d=h,c=h;for(let f in a)if("1"!==f){if("0"===f){d=g;break}a[f]*=e.n;if(a[f]%e.d===g)a[f]/=e.d;else return null;d*=BigInt(f)**a[f]}for(let f in b)if("1"!==f){b[f]*=e.n;if(b[f]%e.d===g)b[f]/=e.d;else return null;c*=BigInt(f)**b[f]}return e.s<g?l(c,d):l(d,c)},equals:function(a,b){n(a,b);return this.s*this.n*e.d===e.s*e.n*this.d},lt:function(a,b){n(a,b);return this.s*this.n*e.d<e.s*e.n*this.d},lte:function(a,b){n(a,b);return this.s*this.n*e.d<=e.s*e.n*this.d},gt:function(a,b){n(a,b);return this.s*
this.n*e.d>e.s*e.n*this.d},gte:function(a,b){n(a,b);return this.s*this.n*e.d>=e.s*e.n*this.d},compare:function(a,b){n(a,b);a=this.s*this.n*e.d-e.s*e.n*this.d;return(g<a)-(a<g)},ceil:function(a){a=q**BigInt(a||0);return l(r(this.s*a*this.n/this.d)+(a*this.n%this.d>g&&this.s>=g?h:g),a)},floor:function(a){a=q**BigInt(a||0);return l(r(this.s*a*this.n/this.d)-(a*this.n%this.d>g&&this.s<g?h:g),a)},round:function(a){a=q**BigInt(a||0);return l(r(this.s*a*this.n/this.d)+this.s*((this.s>=g?h:g)+a*this.n%this.d*
y>this.d?h:g),a)},roundTo:function(a,b){n(a,b);var d=this.n*e.d;a=this.d*e.n;b=d%a;d=r(d/a);b+b>=a&&d++;return l(this.s*d*e.n,e.d)},divisible:function(a,b){n(a,b);return!(!(e.n*this.d)||this.n*e.d%(e.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(a){let b=this.n,d=this.d;a=a||15;var c;a:{for(c=d;c%y===g;c/=y);for(;c%A===g;c/=A);if(c===h)c=g;else{for(var f=q%c,k=1;f!==h;k++)if(f=f*q%c,2E3<k){c=g;break a}c=BigInt(k)}}a:{f=h;k=q;var m=c;let p=h;for(;m>g;k=
k*k%d,m>>=h)m&h&&(p=p*k%d);k=p;for(m=0;300>m;m++){if(f===k){f=BigInt(m);break a}f=f*q%d;k=k*q%d}f=0}k=f;f=this.s<g?"-":"";f+=r(b/d);(b=b%d*q)&&(f+=".");if(c){for(a=k;a--;)f+=r(b/d),b%=d,b*=q;f+="(";for(a=c;a--;)f+=r(b/d),b%=d,b*=q;f+=")"}else for(;b&&a--;)f+=r(b/d),b%=d,b*=q;return f},toFraction:function(a){let b=this.n,d=this.d,c=this.s<g?"-":"";if(d===h)c+=b;else{let f=r(b/d);a&&f>g&&(c+=f,c+=" ",b%=d);c=c+b+"/"+d}return c},toLatex:function(a){let b=this.n,d=this.d,c=this.s<g?"-":"";if(d===h)c+=
b;else{let f=r(b/d);a&&f>g&&(c+=f,b%=d);c=c+"\\frac{"+b+"}{"+d;c+="}"}return c},toContinued:function(){let a=this.n,b=this.d,d=[];do{d.push(r(a/b));let c=a%b;a=b;b=c}while(a!==h);return d},simplify:function(a){a=a||.001;const b=this.abs(),d=b.toContinued();for(let c=1;c<d.length;c++){let f=l(d[c-1],h);for(let k=c-2;0<=k;k--)f=f.inverse().add(d[k]);if(Math.abs(f.sub(b).valueOf())<a)return f.mul(this.s)}return this}};"function"===typeof define&&define.amd?define([],function(){return t}):"object"===
typeof exports?(Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=t,t.Fraction=t,module.exports=t):D.Fraction=t})(this);
